---
const clans = [
  { name: '"Juggernaut"',  tag: '#8CUQYQGY' },
  { name: 'FrostLegion', tag: '#2YUJJJQY' },
  { name: 'MARKO',       tag: '#2LC2Y208' },
];

<p>
  Мы — сильнейший альянс СНГ. В нашем распоряжении 3 клана:
  "Juggernaut" (#8CUQYQGY),
  FrostLegion (#2YUJJJQY),
  MARKO (#2LC2Y208).
</p>

<div class="clan-buttons">
  <a class="btn open-clan"
     href="clashroyale://clanInfo?id=8CUQYQGY"
     data-fallback="https://link.clashroyale.com/?clanInfo?id=8CUQYQGY">
    Открыть Juggernaut в игре
  </a>

  <a class="btn open-clan"
     href="clashroyale://clanInfo?id=2YUJJJQY"
     data-fallback="https://link.clashroyale.com/?clanInfo?id=2YUJJJQY">
    Открыть FrostLegion
  </a>

  <a class="btn open-clan"
     href="clashroyale://clanInfo?id=2LC2Y208"
     data-fallback="https://link.clashroyale.com/?clanInfo?id=2LC2Y208">
    Открыть MARKO
  </a>
</div>

<style>
  .clan-buttons { display:flex; flex-wrap:wrap; gap:12px; margin-top:12px; }
  .btn { padding:10px 14px; border:1px solid currentColor; border-radius:12px; text-decoration:none; }
</style>

<script is:inline>
  // Пытаемся открыть схему приложения; если не вышло — уходим на fallback
  document.querySelectorAll('.open-clan').forEach(a => {
    a.addEventListener('click', (e) => {
      e.preventDefault();
      const appUrl = a.getAttribute('href');
      const fallback = a.dataset.fallback;
      let jumped = false;

      // Если система не перехватила схему, через 800 мс откроем fallback
      const t = setTimeout(() => { if (!jumped) location.href = fallback; }, 800);
      // Попытка открыть напрямую в приложении
      location.href = appUrl;

      // через чуть больше секунды «снимаем» таймер, чтобы не было двойных переходов
      setTimeout(() => { jumped = true; clearTimeout(t); }, 1200);
    });
  });
</script>
